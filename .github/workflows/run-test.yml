name: Run Fast Spotify Test
on:
  workflow_dispatch:
    inputs:
      test_type:
        description: 'Type of test to run'
        required: true
        default: 'fast'
        type: choice
        options:
        - fast
        - full

jobs:
  test-spotify-enhancer:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v4
      
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'
        
    - name: Install dependencies
      run: |
        pip install requests pandas
        
    - name: Run fast test
      run: |
        echo "ğŸš€ Starting Fast 1000-Record Test via GitHub Actions"
        echo "âš¡ Features only - Expected time: 5-8 minutes"
        python test_1000_fast.py
        
    - name: Upload results
      uses: actions/upload-artifact@v3
      if: always()
      with:
        name: test-results
        path: |
          enhanced_test_1000_features_only.csv
          test_tracks_1000_features_only.csv
        retention-days: 7
        
    - name: Show results summary
      if: always()
      run: |
        echo "ğŸ“Š Test Results Summary:"
        if [ -f "enhanced_test_1000_features_only.csv" ]; then
          echo "âœ… Enhanced CSV created"
          wc -l enhanced_test_1000_features_only.csv
          ls -lh enhanced_test_1000_features_only.csv
        else
          echo "âŒ Enhanced CSV not found"
        fi
